
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>LEX RADIO - Tu Radio Online</title>
<style>
  /* Asegurar que html y body ocupen toda la pantalla */
  html, body {
    height: 100%;
    margin: 0;
  }

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: 'Poppins', sans-serif;
    color: white;
    overflow-x: hidden;
    background: #0f0f0f;
    position: relative;
    height: 100%;
  }

  /* Animated space background */
  body::before {
    content: '';
    position: fixed;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    background:
      radial-gradient(1px 1px at 25px 25px, white, rgba(0,0,0,0)),
      radial-gradient(1px 1px at 50px 50px, white, rgba(0,0,0,0)),
      radial-gradient(2px 2px at 125px 125px, white, rgba(0,0,0,0)),
      radial-gradient(2px 2px at 70px 70px, white, rgba(0,0,0,0)),
      linear-gradient(to right, #000428, #004e92);
    background-size: 200px 200px, 150px 150px, 100px 100px, 200px 200px, 100% 100%;
    animation: space 20s linear infinite;
    z-index: -1;
  }

  @keyframes space {
    0% {
      background-position: 0 0, 0 0, 0 0, 0 0, 0 0;
    }
    100% {
      background-position: 200px 200px, 150px 150px, 100px 100px, 200px 200px, 0 0;
    }
  }

  .nebula {
    position: fixed;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    background:
      radial-gradient(circle at 50% 50%, rgba(76, 0, 255, 0.2), transparent 60%),
      radial-gradient(circle at 30% 70%, rgba(0, 247, 255, 0.2), transparent 50%),
      radial-gradient(circle at 70% 30%, rgba(255, 0, 234, 0.2), transparent 55%);
    filter: blur(20px);
    animation: nebulaMove 30s ease infinite;
    z-index: -1;
  }

  @keyframes nebulaMove {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.2); }
  }

  .video-container {
    width: 100vw;
    height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    position: relative;
    overflow: hidden;
  }

  .logo {
    width: 300px;
    height: 300px;
    border-radius: 50%;
    animation: pulse 2s infinite;
    box-shadow: 0 0 100px rgba(0,255,255,0.9);
    margin-bottom: 2rem;
    object-fit: cover;
  }

  @keyframes pulse {
    0% {
      transform: scale(1);
      box-shadow: 0 0 100px rgba(0,255,255,0.9),
                  0 0 150px rgba(0,255,255,0.6);
    }
    50% {
      transform: scale(1.1);
      box-shadow: 0 0 120px rgba(0,255,255,1),
                  0 0 150px rgba(0,255,255,0.9),
                  0 0 180px rgba(0,255,255,0.7),
                  0 0 200px rgba(0,255,255,0.5);
    }
    100% {
      transform: scale(1);
      box-shadow: 0 0 100px rgba(0,255,255,0.9),
                  0 0 150px rgba(0,255,255,0.6);
    }
  }

  .equalizer {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 150px;
    display: flex;
    justify-content: center;
    align-items: flex-end;
    padding: 20px;
    background: rgba(0,0,0,0.5);
  }

  .eq-bar {
    width: 8px;
    margin: 0 2px;
    background: linear-gradient(180deg, #00ffff, #0066ff);
    border-radius: 2px;
    transition: height 0.2s ease;
  }

  .text-content {
    text-align: center;
    z-index: 1;
  }

  h1 {
    font-size: 4rem;
    margin-bottom: 1rem;
    text-shadow: 0 0 20px rgba(0,255,255,0.8);
    animation: glow 2s ease-in-out infinite alternate;
  }

  @keyframes glow {
    from {
      text-shadow: 0 0 20px rgba(0,255,255,0.8);
    }
    to {
      text-shadow: 0 0 30px rgba(0,255,255,1),
                   0 0 40px rgba(0,255,255,0.8),
                   0 0 50px rgba(0,255,255,0.6),
                   0 0 60px rgba(0,255,255,0.4);
    }
  }

  .audio-player {
    margin-top: 2rem;
    padding: 1rem;
    background: rgba(0, 0, 0, 0.5);
    border-radius: 10px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
    box-shadow: 0 0 30px rgba(0,255,255,0.3);
  }

  .audio-player audio {
    width: 300px;
  }

  .custom-audio-controls {
    display: flex;
    gap: 1rem;
    align-items: center;
  }

  .play-pause-btn {
    padding: 1rem 2rem;
    font-size: 1.5rem;
    background: linear-gradient(45deg, #00ffff, #0066ff);
    border: none;
    border-radius: 25px;
    color: white;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 0 30px rgba(0,255,255,0.5);
  }

  .play-pause-btn:hover {
    transform: scale(1.1);
    box-shadow: 0 0 40px rgba(0,255,255,0.7);
  }

  .volume-control {
    width: 150px;
    height: 8px;
    -webkit-appearance: none;
    background: rgba(255,255,255,0.2);
    border-radius: 4px;
    outline: none;
  }

  .volume-control::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 16px;
    height: 16px;
    background: #00ffff;
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 0 10px rgba(255,255,255,0.8);
  }

  .particle {
    position: fixed;
    background: white;
    pointer-events: none;
    opacity: 0;
    border-radius: 50%;
    animation: fallingStar linear infinite;
    box-shadow: 0 0 20px rgba(255,255,255,0.8);
  }

  @keyframes fallingStar {
    0% {
      transform: translateY(-100vh) translateX(-100vw) rotate(45deg);
      opacity: 1;
    }
    100% {
      transform: translateY(100vh) translateX(100vw) rotate(45deg);
      opacity: 0;
    }
  }

  .particle::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, white, transparent);
    transform: translateX(-100%) rotate(45deg);
    filter: blur(2px);
  }

  /* Media Queries para adaptabilidad */

  /* Móviles pequeños */
  @media (max-width: 600px) {
    .logo {
      width: 180px;
      height: 180px;
      margin-bottom: 1.5rem;
    }

    h1 {
      font-size: 2.5rem;
    }

    .audio-player audio {
      width: 90vw;
    }

    .play-pause-btn {
      padding: 0.8rem 1.5rem;
      font-size: 1.2rem;
    }

    .volume-control {
      width: 100px;
    }
  }

  /* Tablets */
  @media (min-width: 601px) and (max-width: 900px) {
    .logo {
      width: 220px;
      height: 220px;
    }

    h1 {
      font-size: 3.5rem;
    }

    .audio-player audio {
      width: 70vw;
    }
  }
</style>
</head>
<body>

<div class="nebula"></div>
<div class="particles" id="particles"></div>

<div class="video-container">
  <img src="https://i.imgur.com/BhXCsFa.png" alt="LEX RADIO Logo" class="logo" />
  
  <div class="text-content">
    <h1>LEX RADIO</h1>
    <p>Tus Recuerdos En El Presente</p>
    
    <div class="audio-player">
      <audio id="radioPlayer" preload="auto" crossorigin="anonymous">
        <source src="https://stream.zeno.fm/lo1dx1b1e52tv" type="audio/mpeg" />
        <source src="https://stream.zeno.fm/lo1dx1b1e52tv.m3u" type="audio/x-mpegurl" />
        Tu navegador no soporta el elemento de audio.
      </audio>
      <div class="custom-audio-controls">
        <button class="play-pause-btn" id="playPauseBtn">▶ Reproducir</button>
        <input type="range" class="volume-control" min="0" max="1" step="0.1" value="1" id="volumeControl" />
      </div>
    </div>
  </div>

  <div class="equalizer" id="equalizer"></div>
</div>

<script>
// Partículas (estrellas fugaces)
function createParticles() {
  const particlesContainer = document.getElementById('particles');
  for (let i = 0; i < 20; i++) {
    const particle = document.createElement('div');
    particle.className = 'particle';
    particle.style.width = Math.random() * 3 + 2 + 'px';
    particle.style.height = particle.style.width;
    particle.style.left = Math.random() * 100 + 'vw';
    particle.style.animationDuration = Math.random() * 3 + 2 + 's';
    particle.style.animationDelay = Math.random() * 10 + 's';
    particlesContainer.appendChild(particle);
  }
}

let audioContext, analyzer, dataArray;
let retryCount = 0;
const maxRetries = 3;

async function initializeAnalyzer() {
  try {
    if (!audioContext) {
      audioContext = new (window.AudioContext || window.webkitAudioContext)();
      analyzer = audioContext.createAnalyser();
      analyzer.fftSize = 256;
      
      const source = audioContext.createMediaElementSource(radioPlayer);
      source.connect(analyzer);
      analyzer.connect(audioContext.destination);
      dataArray = new Uint8Array(analyzer.frequencyBinCount);
    }
  } catch (error) {
    console.error('Error initializing analyzer:', error);
    if (retryCount < maxRetries) {
      retryCount++;
      await new Promise(resolve => setTimeout(resolve, 1000));
      return initializeAnalyzer();
    }
  }
}

const radioPlayer = document.getElementById('radioPlayer');
const playPauseBtn = document.getElementById('playPauseBtn');
const volumeControl = document.getElementById('volumeControl');
const equalizer = document.getElementById('equalizer');

async function playAudio() {
  try {
    await audioContext.resume();
    await radioPlayer.play();
    playPauseBtn.textContent = '⏸ Pausar';
  } catch (error) {
    console.error('Error al reproducir:', error);
    playPauseBtn.textContent = '▶ Reproducir';
    alert('Error al reproducir. Intentando reconectar...');
    radioPlayer.src = 'https://stream.zeno.fm/lo1dx1b1e52tv';
    await radioPlayer.load();
    await playAudio();
  }
}

function animateEqualizer() {
  if (analyzer && !radioPlayer.paused) {
    analyzer.getByteFrequencyData(dataArray);
    const bars = document.querySelectorAll('.eq-bar');
    
    let sum = 0;
    for (let i = 0; i < dataArray.length; i++) {
      sum += dataArray[i];
    }
    const average = sum / dataArray.length;
    
    bars.forEach(bar => {
      const variation = Math.random() * 20 - 10;
      const height = (average / 255) * 130 + 20 + variation;
      bar.style.height = `${Math.max(20, Math.min(150, height))}px`;
    });
  }
  requestAnimationFrame(animateEqualizer);
}

document.addEventListener('DOMContentLoaded', async () => {
  createParticles();

  const numBars = 100;
  for (let i = 0; i < numBars; i++) {
    const bar = document.createElement('div');
    bar.className = 'eq-bar';
    equalizer.appendChild(bar);
  }

  await initializeAnalyzer();

  playPauseBtn.addEventListener('click', async () => {
    if (radioPlayer.paused) {
      await playAudio();
    } else {
      radioPlayer.pause();
      playPauseBtn.textContent = '▶ Reproducir';
    }
  });

  volumeControl.addEventListener('input', () => {
    radioPlayer.volume = volumeControl.value;
  });

  radioPlayer.addEventListener('error', async (e) => {
    console.error('Error en la reproducción:', e);
    if (retryCount < maxRetries) {
      retryCount++;
      await new Promise(resolve => setTimeout(resolve, 1000));
      radioPlayer.src = 'https://stream.zeno.fm/lo1dx1b1e52tv';
      await radioPlayer.load();
      await playAudio();
    } else {
      alert('No se pudo establecer la conexión con la radio. Por favor, intenta más tarde.');
    }
  });

  animateEqualizer();
  setInterval(createParticles, 12000);
});
</script>

</body>
</html>
